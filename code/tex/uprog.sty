%% Documents involving programming, algorithms etc. 
%% Umut Ozge---tumuum@gmail.com

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{uprog}

%\RequirePackage{pythontex}
\RequirePackage{inconsolata}
\RequirePackage[noend]{algpseudocode}
\RequirePackage{fancyvrb}
\RequirePackage{mdframed}
\RequirePackage{xcolor}
\definecolor{silver}{rgb}{0.95,0.95,0.95}
\definecolor{lkeyword}{rgb}{0.72,0.25,0.12}
\definecolor{dkgreen}{rgb}{0,0.5,0}
%\definecolor{cbg}{RGB}{240,230,140}
\definecolor{cbg}{RGB}{253,253,253}
%\definecolor{cbg}{RGB}{255,255,255}

\RequirePackage[cache=false]{minted}

%\newcommand{\inlisp}[1]{\inputminted[xleftmargin=1em,linenos,numbersep=8pt,tabsize=2,obeytabs]{lisp}{#1}}
\newcommand{\inlisp}[1]{\inputminted[xleftmargin=1em,tabsize=2,obeytabs]{lisp}{#1}}

\newcommand{\code}[1]{\Verb|#1|}


\usepackage{listings}

\lstset{numbers=left, numberstyle=\tiny, stepnumber=1,firstnumber=1,
  numbersep=5pt,language=Lisp,
basicstyle=\normalsize, 
showstringspaces=false,
keywordstyle=\color{lkeyword},
commentstyle=\color{dkgreen}
breaklines=true,
frame=single
}

\lstnewenvironment{lispcode}[1][]
{\sffamily \lstset{#1}}{}


% \newenvironment{lispcode}
% {%
% \VerbatimEnvironment
% \begin{ucodeframe}
% \begin{minted}[tabsize=4,obeytabs,linenos]{lisp}%
% }
% {%
% \end{minted}%
% \end{ucodeframe}%
% }

\newenvironment{ucodeframe}
{%
\begin{mdframed}[backgroundcolor=cbg]%
\begin{minipage}[t]{\textwidth}%
}
{%
\end{minipage}%
\end{mdframed}%
}


\algnewcommand{\algorithmicprint}{\textbf{print} }
\algnewcommand{\Print}{\algorithmicprint}
\newenvironment{ualgorithmic}
{
\begin{mdframed}[backgroundcolor=silver]
\footnotesize
\hspace{1em}
\begin{algorithmic}
}
{
\end{algorithmic}
\end{mdframed}
}


%lisp related abbreviations

\newcommand{\car}{\Verb+CAR+}
\newcommand{\cdr}{\Verb+CDR+}
\newcommand{\cadr}{\Verb+CADR+}
\newcommand{\cddr}{\Verb+CDDR+}
\newcommand{\caar}{\Verb+CAAR+}
\newcommand{\nil}{\Verb+NIL+}
\newcommand{\true}{\Verb+T+}

